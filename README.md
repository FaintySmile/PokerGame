# Poker Game
Ссылка на демо: https://pokergame-front.onrender.com/
## 1. Краткое описание проекта

**Poker Game** - это многопользовательское веб-приложение для игры в Техасский Холдем Покер. Приложение состоит из двух основных частей:

*   **Фронтенд (poker-frontend):** Реализован на React, отвечает за пользовательский интерфейс, отображение игрового стола, карт, действий игроков и взаимодействие с бэкендом через WebSocket. Использует `react-router-dom` для навигации,
*   **Бэкенд (poker-backend):** Написан на Node.js с использованием Express и библиотеки `ws` для WebSocket. Управляет игровой логикой, состоянием комнат, раздачей карт, определением победителей (с помощью `pokersolver`) и обработкой действий игроков.

Игроки могут создавать игровые комнаты или присоединяться к существующим, используя уникальный идентификатор комнаты и никнейм. Игра следует основным правилам Техасского Холдема.

## 2. Стек технологий

*   **Фронтенд:**
    *   React (**Vite**)
    *   JavaScript
    *   CSS3
    *   React Router DOM
*   **Бэкенд:**
    *   Node.js
    *   Express.js
    *   WebSocket (`ws` library)
    *   `pokersolver` (для определения покерных комбинаций)
    *   `uuid` (для генерации уникальных ID)

## 3. Инструкции по установке и запуску

### Требования:

*   Node.js (>18.x)

### Установка зависимостей:

1.  Склонируйте репозиторий:
    ```bash
    git clone https://github.com/FaintySmile/PokerGame
    cd PokerGame
    ```
2.  Установите зависимости для бэкенда:
    ```bash
    cd poker-backend
    npm install
    # или
    # yarn install
    cd ..
    ```
3.  Установите зависимости для фронтенда:
    ```bash
    cd poker-frontend
    npm install
    # или
    # yarn install
    cd ..
    ```

### Запуск приложения:

1.  **Запустите бэкенд сервер:**
    В терминале, находясь в директории `poker-backend`:
    ```bash
    npm start
    # или
    # node server.js
    ```
    Сервер запустится на `http://localhost:8080`.

2.  **Запустите фронтенд (сервер для разработки):**
    В **новом** терминале, находясь в директории `poker-frontend`:
    ```bash
    npm run dev
    ```
    Фронтенд обычно запускается на `http://localhost:5173`

## 4. Описание процесса проектирования и разработки

*   **Проектирование:**
    *   Определение основных сущностей: Комната, Игрок, Состояние Игры.
    *   Выбор WebSocket для обмена данными в реальном времени.
    *   Проектирование API сообщений WebSocket.
    *   Разработка структуры состояния игры на сервере.
    *   Проектирование компонентов React для фронтенда.
*   **Разработка:**
    *   Реализация управления комнатами (создание, присоединение).
    *   Разработка основной игровой логики на сервере: раздача карт, блайнды, раунды ставок, определение победителя.
    *   Создание пользовательского интерфейса на React для отображения игрового процесса.
    *   Интеграция фронтенда с бэкендом через WebSocket.
    *   Добавление никнеймов, улучшение UX.
    *   Реализация анимаций и звуковых эффектов.
    *   Обработка дисконнектов и базовых ошибок.

## 5. Уникальные подходы или методологии

*   **Централизованное состояние игры на сервере:** Сервер является единственным обработчиком игрового состояния.
*   **Адаптивная отправка состояния клиентам:** Бэкенд скрывает информацию (например, карты оппонентов) при отправке состояния игры конкретному клиенту.

## 6. Компромиссы, принятые во время разработки

*   **Упрощенное распределение банка при ничьей:** Не обрабатываются побочные банки (side pots) и нечетные фишки.
* **Логика блайндов и дилера для >2 игроков:** Логика определения блайндов и дилера в server.js в основном ориентирована на 2 игроков или простую циклическую смену. Для более сложных сценариев с большим количеством игроков потребовалась бы более сложная логика.
*   **Отсутствие сохранения и логирования данных:** Состояние комнат и игр хранится только в памяти сервера.
*   **Минимальная валидация на клиенте:** Основная валидация происходит на сервере.
* **Отсутствие системы аутентификации/пользователей:** Игроки идентифицируются только по никнейму в рамках сессии комнаты. Нет сохранения прогресса или статистики.
*   **Отсутствие автоматизированных тестов:** Проект разрабатывался без покрытия тестами.
* **Очистка неактивных комнат:** Логика cleanupInactiveRooms в server.js базовая. Она проверяет lastActivityTime, но это время обновляется не на каждое сообщение, а только на ключевые действия. Это может привести к тому, что активная, но "тихая" комната будет удалена.

## 7. Известные ошибки или проблемы

*   **Автовоспроизведения звука:** Браузеры могут блокировать автоматическое воспроизведение звуков до взаимодействия пользователя со страницей.
*   **Управление состоянием при обновлении страницы:** При обновлении страницы в игровой комнате может потребоваться повторный ввод никнейма или может произойти потеря временного состояния. `localStorage` используется для частичного сохранения никнейма.
*   **Очистка неактивных комнат:** Логика очистки комнат на сервере является супер базовой и может быть улучшена.

## 8. Потенциальные улучшения

*   Реализация побочных банков.
*   Добавление системы пользователей с сохранением статистики.
*   Улучшение обработки ошибок и UI/UX.
*   Написание тестов.
*   Поддержка большего количества игроков за столом с корректной логикой блайндов.
*   Турнирный режим.
*   Оптимизация производительности для большого количества одновременных игр/игроков.
* Авторизация
* Анимации
## 9. Обоснование выбора технического стека

*   **React (Фронтенд):** Выбран за компонентный подход, позволяющий удобно структурировать сложный игровой интерфейс и эффективно управлять его обновлениями.
*   **Node.js (Бэкенд):** Идеален для приложений реального времени благодаря своей асинхронной неблокирующей природе, что позволяет легко и производительно обрабатывать множество одновременных WebSocket-соединений - ключевой аспект для онлайн-игры.
*   **Express.js (Бэкенд-фреймворк):** Предоставляет необходимый минимум для создания веб-сервера и API, удобен в использовании и не перегружен избыточной функциональностью, в отличие от более громоздких фреймворков (например, NestJS), которые были бы излишни для данного проекта.
*   **WebSocket (протокол и библиотека `ws`):** Обеспечивает мгновенную двустороннюю связь между клиентом и сервером, что критично для игр. Библиотека `ws` для Node.js проста и эффективна.
*   **`pokersolver`:** Готовое решение для сложной логики определения силы покерных комбинаций (руки)